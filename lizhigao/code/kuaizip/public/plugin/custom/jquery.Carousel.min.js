!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function g(c,d){this._marginLeft=0,this._carouselWidth=0,this._name=b,this._defaults=f,this._scrollWidth=0,this._$targetUl=null,this._totalPageNums=0,this._currentPageIndex=0,this._timer=null,this.element=c,this.settings=a.extend({},f,d),this.$prevHandler=a(this.settings.prevHandler),this.$nextHandler=a(this.settings.nextHandler),this.init()}var b="Carousel",c=!1,d=!1,e=!0,f={prevHandler:"",nextHandler:"",listHandler:"",items:1,targetUl:".zg-carousel",speed:"normal",interval:3e3,height:"auto",autoPlay:!0,callback:null,gap:10};return g.prototype={init:function(){var b=this,c=a(b.element),d=c.children(b.settings.targetUl),e=d.children("li");c.css({position:"relative",overflow:"hidden"}),d.css({overflow:"hidden",margin:"0",padding:"0",listStyle:"none"}),e.css({"float":"left",height:b.settings.height}),b.resizeUl(),b.checkMl(),b.registerEvents(),b.settings.autoPlay&&(b.startInterval(),d.on("mouseover",function(){b.stopInterval()}).on("mouseout",function(){b.startInterval()}));var f;a(window).off(".carousel").on("resize.carousel",function(){b.stopInterval(),clearTimeout(f),f=setTimeout(function(){b.resizeUl(),b.showPage(0),b._callback(0)},500)})},resizeUl:function(){var b=this,c=parseInt(b.settings.items,10),d=parseInt(b.settings.gap,10),e=a(b.element),f=e.width(),g=e.children(b.settings.targetUl),h=g.children("li"),i=h.length,j=0;if(b._$targetUl=g,b._totalPageNums=Math.ceil(i/c),b._carouselWidth=f,b._scrollWidth=1==b.settings.items?b._carouselWidth:b._carouselWidth+d,1==c)h.width(f),j=f*i;else{var k=(f-(c-1)*d)/c;h.css({width:k,marginRight:d}),j=(k+d)*i}g.width(j)},registerEvents:function(){var a=this;a.$prevHandler&&a.$prevHandler.on("click.carousel",function(){c&&e&&a.prevPage()}),a.$nextHandler&&a.$nextHandler.on("click.carousel",function(){d&&e&&a.nextPage()})},startInterval:function(){var a=this;a.stopInterval(),this._timer=setInterval(function(){d&&e?a.nextPage():e&&a.nextPage("last")},a.settings.interval)},stopInterval:function(){this._timer&&(clearInterval(this._timer),this._timer=null)},prevPage:function(){var a=this;e=!1,a.stopInterval(),a._$targetUl.stop(!1,!0).animate({marginLeft:"+="+a._scrollWidth},a.settings.speed,function(){a.setMl(),a.checkMl(),e=!0,a.settings.autoPlay&&a.startInterval(),a._currentPageIndex--,a._callback(a._currentPageIndex)})},nextPage:function(a){var b=this;e=!1,b.stopInterval(),"last"!=a?b._$targetUl.stop(!1,!0).animate({marginLeft:"-="+b._scrollWidth},b.settings.speed,function(){b.setMl(),b.checkMl(),e=!0,b.settings.autoPlay&&b.startInterval(),b._currentPageIndex++,b._callback(b._currentPageIndex)}):b._$targetUl.animate({marginLeft:0},"fast",function(){b.setMl(),b.checkMl(),e=!0,b.settings.autoPlay&&b.startInterval(),b._currentPageIndex=0,b._callback(b._currentPageIndex)})},_callback:function(a){var b=this;b.settings.callback&&"function"==typeof b.settings.callback&&b.settings.callback(a)},setMl:function(){var a=this,b=a._$targetUl.css("margin-left");b=b.substring(0,b.length-2),this._marginLeft=parseInt(b,10)},checkMl:function(){var a=this,b=a._$targetUl.width(),e=a._marginLeft;e>=0?(a.$prevHandler.hide(),c=!1):(a.$prevHandler.show().css({cursor:"pointer"}),c=!0),e<=a._scrollWidth-b?(a.$nextHandler.hide(),d=!1):(a.$nextHandler.show().css({cursor:"pointer"}),d=!0)},showPage:function(a){var b=this,c=parseInt(b._scrollWidth*a,10);e=!1,b.stopInterval(),b._$targetUl.stop().animate({marginLeft:-c},b.settings.speed,function(){b.setMl(),b.checkMl(),e=!0,b.settings.autoPlay&&b.startInterval(),b._currentPageIndex=a})}},a.fn[b]=function(a){var b=null;return this.each(function(){b=new g(this,a)}),b},{Carousel:g}});